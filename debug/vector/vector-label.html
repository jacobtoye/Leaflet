<!DOCTYPE html>
<html>
<head>
	<title>Leaflet debug page</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<link rel="stylesheet" href="../../dist/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="../../dist/leaflet.ie.css" /><![endif]-->

	<link rel="stylesheet" href="../css/mobile.css" />

	<script src="../leaflet-include.js"></script>
</head>
<body>
	<div id="map"></div>
	<div style="position: absolute; top: 10px; left: 49px;">
		<button id="btnUnbind">test unbind</button>
		<button id="btnUpdateLabel">test update label</button>
	</div>

	<script>
		var map = L.map('map');

		var marker = L.marker([51.5, -0.09])
			.bindPopup("<b>Hello world!</b><br />I am a popup.")
			.bindLabel("I am a marker's label.")
			.addTo(map);
			//.openPopup();

		var circle = L.circle([51.508, -0.11], 500, {color: '#f03', opacity: 0.7})
			.bindPopup("I am a circle.")
			.bindLabel("I am a circle's label.")
			.addTo(map);

		var polygon = L.polygon([
			[51.509, -0.08],
			[51.503, -0.06],
			[51.51,  -0.047]])
			.bindPopup("I am a polygon.")
			.bindLabel("I am a polygon's label.")
			.addTo(map);

		map.setView([51.505, -0.09], 13);

		var cloudmade = L.tileLayer('http://{s}.tile.cloudmade.com/{key}/{styleId}/256/{z}/{x}/{y}.png', {
			attribution: 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',
			maxZoom: 18,
			key: 'BC9A493B41014CAABB98F0471D759707',
			styleId: 997
		}).addTo(map);

		function unbind() {
			circle.unbindLabel();
			marker.unbindLabel();
		}

		var i = 0;
		function updateText() {
			circle.updateLabelContent('Circle: ' + i);
			marker.updateLabelContent('Marker: ' + i);
			i++;
		}

		L.DomUtil.get('btnUnbind').onclick = unbind;
		L.DomUtil.get('btnUpdateLabel').onclick = updateText;

	</script>
</body>
</html>
